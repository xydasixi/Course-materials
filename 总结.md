### 绪论

#### 1.计算机网络是什么

- 主机（host）
  - 等于终端
  - 运行网络应用
- 通信链路
  - 光纤（fiber）
  - 铜线（copper）
  - 无线电（radio）
  - 卫星（satellite）
  - 传输速率：带宽（bandwidth）bps
- 分组交换机（packet switches）
  - 路由器（routers）
  - 交换机（switches）
- 因特网
  - network of networks
  - 互联的ISPs
- 协议（protocols）
  - TCP，IP，HTTP，802.11
- 因特网标准
  - RFC，IETF（也是组织）

#### 2.网络边缘（network edge）

- 主机

  - 客户（client）和服务器（servers）
  - 服务器通常位于数据中心
  - ![image-20220511132238624](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205111322674.png)

- 连接终端到边缘路由器

  - 住宅接入网（residential access networks）
  - 机构接入网（institutional access networks  school、company）
  - 移动接入网（mobile access networks）

- 接入网络

  - DSL（数字用户线）
    - 使用电话线接入中心办公室DSLAM
    - 上传速度小于2.5Mbps
  - cable network（有线电视网络）
    - 频分复用（数据和电视信号通过不同频率传输）
    - 与DSL不一样（需要连接中心办公室）
    - HFC（混合光纤同轴网）：光纤和同轴网（铜线）
  - 家庭网
    - ![image-20220511133534338](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205111335393.png)
  - 以太网（企业接入网络）
    - 通常用于公司，大学等
    - 传输速率多样：10Mbps，100Mbps，1Gbps，10Gbps
    - 现在终端系统连接一般都是以太网交换机
    - ![image-20220511204458442](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112044557.png)
  - 无线接入网
    - 通过基站（接入点）连接终端到路由器
    - 无线局域网（WLAN）802.11b/g/n 11，54，450Mbps
    - 无线广域网 3G，4G 1-10Mbps
  - 包传输时延（packet transmission delay）
    - ![image-20220511205645269](C:\Users\xydasixi\AppData\Roaming\Typora\typora-user-images\image-20220511205645269.png)
    - 链路传输速率（R）等于链路容量（capacity），等于链路带宽（bandwidth）
    - L为一个packet的长度
    - ![image-20220511210451996](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112104101.png)
  - 物理媒介：
    - 引导媒体：铜线（copper），光纤（fiber），coax（同轴电缆）
    - 非引导媒体：无线电（radio）
    - 双绞线（twisted pair）
      - 两根绝缘铜线
      - 五类线：100Mbps，1Gbps
      - 六类线：10Gbps
    - 同轴电缆（coaxial cable）
      - 两个同心铜导体
      - 宽频带
    - 光纤
      - 高速
      - 低错误率
    - 无线电
      - 传输受环境影响，反射（reflection），遮挡（obstruction），干扰（interference）
      - 类型有地面微波（45Mbps），局域网（54Mbps），广域网（4g蜂窝网 10Mbps），卫星（45Mbps）

#### 3.网络核心

- 互联路由器组成的网状结构
- 分组交换
  - 主机将应用层信息分解为数据包
  - 存储转发
    - 所以包必须全部到一个路由器后它才转发到下一个
    - 单跳传输时延L/R
    - ![image-20220511212544644](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112125783.png)
    - 上图端到端时延为2L/R
  - 排队时延，丢包
    - 链路到达速率一段时间内超过传输速率
    - 如果缓存区满了（buffer）会溢出导致丢包
- 网络核心的两个关键功能
  - 路由：决定走哪一条路
  - 转发：移动包到正确的路
- 电路交换
  - ![image-20220511213147093](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112131173.png)
  - 分配资源等待调用
  - 不共享
  - 通常用于传统电话网络
  - 频分复用和时分复用
- 分组转发和电路交换
  - 分组转发让更多用户使用网络
  - ![image-20220511213559225](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112135323.png)
  - p为活跃率![image-20220511213627236](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112136317.png)
  - 适合突发数据
    - 资源共享
    - 简单，不需要调用建立
    - 可能出现过度拥塞（congestion）
- 因特网结构
  - 终端连接因特网通过接入ISPs（Internet Service Providers）
  - ![image-20220511214030821](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112140968.png)
  - ![image-20220511214048455](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112140603.png)

#### 4.协议层，服务模型

- 网络协议
  - 定义信息发送接收的格式，顺序，和传输动作
- 为什么分层
  - 方便确定复杂系统各部分之间的关系
  - 模块化简化了系统维护和更新
- ![image-20220511214507945](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112145116.png)
- ![image-20220511214527314](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112145501.png)

#### 5.时延，丢包，吞吐量

- 时延
  - 等于处理时延加排队时延加传输时延加传播时延
  - ![image-20220511214908145](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112149315.png)
  - ![image-20220511214927060](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112149156.png)
  - 排队时延
    - R 带宽，bps
    - L 包长度，bits
    - a 包平均到达率
    - ![image-20220511215139912](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112151023.png)
- 丢包
  - 缓存有限
  - 丢的包可能被前一节点，终端重新传输，也可能啥都不做
- 吞吐量（throughout）
  - 发送方、接收方之间传输bit的速率
  - 是实时的，与带宽不一样
  - 瓶颈为较低的![image-20220511215609116](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112156200.png)

### 物理层

#### 1.目标

- 确保发送信号“0”和“1”的正确性以及发送和接收的一致性
- 位–传输模式、速度、持续时间和信号失真
- 接口设计：引脚数量、规格、功能等
- 信号传输程序：如何安排传输过程和事件顺序
- 四个特性
  - 机械特性（Mechanical Characteristics）：指定连接器的大小、管脚的数量和排列
  - 电气特性（Electrical Characteristics）：指定传输二进制位时的传输模式、电压电平、编码、阻抗匹配、传输速率和距离限制。 
  - 功能特性（Functional Characteristics）：定义每条物理线路的功能，指示线路上出现的特殊电压的方式，线路功能分为四类：数据、控制、定时、电源 
  - 规程特性（Procedural Characteristics）：定义每条物理线路的工作规则和时序关系，信号传输：单工、半双工、全双工 （simplex, half duplex, full duplex）
- 物理层协议：负责将位数据从物理介质的一端可靠地传输到另一端

#### 2.数据通信基础理论

- 基本概念
  - 通信系统模型![image-20220511221757124](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112217289.png)
  - 数据（data）：描述客观事实
  - 信息（information）：数据的收集、意义和解释 
  - 信号（signal）：数据传输过程的形式
    - 数据的电子或电磁编码
    - ![image-20220511222929322](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112229487.png)
  - 信道（channel）
    - 向特定方向发送信息的媒体 
    - ![image-20220511223156012](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112231191.png)
  - 模拟信号对比数字信号
    - ![image-20220511225410394](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112254473.png)
    - 数字信号是趋势
      - 计算机只能存储处理（process）数字数据
      - 数字信号可以被压缩和加密（compressed and encrypted ），提高传输速率和安全性
  - 传输
    - 串行（serial）传输：适合长距离
    - 并行（parallel）传输：适合短距离
    - ![image-20220511225851417](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112258469.png)
    - ![image-20220511225902364](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112259473.png)
- 信道特性
  - 符号（symbol）
    - 经过信道编码和调制后的数据
    - 一种数字脉冲，代表离散值的基本波形
    - ![image-20220511234940877](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112349907.png)
    - ![image-20220511235045341](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205112350377.png)
  - 波特率（baud rate，又叫调制率和符号率）
    - 信号每秒改变的次数
    - 1baud每秒发送一个符号
  - 比特率（bit rate）对于带宽为W（Hz）的理想低通信道，其最大符号传输速率=2W
    - 每秒传输的比特数
    - 如果一个符号有n位，比特率=波特率*n 
  - 信道容量（channel capacity，网络中的带宽）
    - 每单位时间可通过信道传输的最大比特数，以bps表示 
  - 频率带宽（frequency bandwidth，通信中）
    - 通道允许的信号频率范围（=最大频率-最小频率），单位为Hz 
  - 传输时延
    - 发送和接收的处理时间+电信号响应时间+中间过渡时间 
  - 奈奎斯特定律
    - 对于带宽为W（Hz）的理想低通（low-pass）信道，其最大符号传输速率=2W baud
    - 对于带宽为W（Hz）的理想带通（band-pass）信道，其最大符号传输速率=W baud
  - 失真
    - 实际信道不理想
    - 符号传输速率更高，信号传输距离更远，失真越大
  - 香农公式
    - 信道的极限信息传输速率C
    - ![image-20220512000452812](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120004843.png)
    - W：频率带宽，S：通过信道的平均信号功率，N：信道中的高斯噪声功率
    - S/N：与信噪比有关（signal-to-noise ratio），db描述：10log~10~S/N
    - 由于信号丢失，实际速率远低于C 
    - 只要传输速率<C，就有可能实现无差错传输
    - ![image-20220512012329646](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120123708.png)
- 信号转换
  - ![image-20220512012817024](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120128087.png)
  - 调制解调模型（Modulation / demodulation）
    - 模拟信道
    - ![image-20220512012918946](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120129037.png)
  - 编码解码模型（Coding / decoding ）
    - 数字信道
    - ![image-20220512012949530](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120129582.png)
  - 调制
    - 数字数据转换为模拟信号
    - 数字和载波信号（carrier signals）
    - 调幅（Amplitude Modulation (AM)）![image-20220512013251691](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120132741.png)
    - 调频（Frequency Modulation (FM)）![image-20220512013324214](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120133277.png)
    - 相位调制（Phase Modulation (PM)）![image-20220512013416716](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120134793.png)
    - 正交幅度调制（Quadrature Amplitude Modulation (QAM)）
      - 综合AM和PM
      - 如果相位有x变化，振幅有y变化，那么就有x*y组合变化
  - 脉冲编码调制（Pulse Code Modulation (PCM)）
    - 模拟数据到数字信号
    - 采样定理：只要采样频率不小于信号最大频率的两倍，就可以从采样脉冲中恢复原始信号而不失真
    - ![image-20220512013942543](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120139606.png)
    - ![image-20220512014042641](https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120140677.png)
    - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120140360.png" alt="image-20220512014057267" style="zoom:70%;" />
  - 数字信号编码
    - 数字数据到数字信号
    - NRZ-L
      - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120143608.png" alt="image-20220512014336518" style="zoom:50%;" />
      - 缺点
        - 难以区分一个的结束和另一个的开始
        - 发送方和接收方必须进行时钟同步
        - 如果信号“0”或“1”连续出现，信号直流分量将累积
        - 容易出现传播错误 
      - 位同步（Bit synchronization）：目的是使接收方接收到的每一位信息与发送方同步
      - 外部同步：<img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120147910.png" alt="image-20220512014712819" style="zoom:50%;" />
      - 自同步
    - Manchester Coding（曼彻斯特编码）
      - 每个符号被分成两个相等的间隔， “1”：上一个区间为高，下一个区间为低，“0”：上一个区间为低位，下一个区间为高位 
      - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120148307.png" alt="image-20220512014859197" style="zoom:50%;" />
      - 优点
        - 克服NRZ编码的缺点
        - 符号中间的每个跳转都可以用作数据，也可以用作自同步的时钟
      - 缺点
        - 传输通道的带宽要求翻倍
        - 高频噪声也会增加，易受噪声干扰
    - Differential Manchester Coding（差分曼彻斯特编码）
      - “1”：符号前半部分的级别与前一符号后半部分的级别相同。“0”：符号前半部分的级别与前一符号后半部分的级别相反 
      - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120152140.png" alt="image-20220512015207071" style="zoom:50%;" />
      - 优点：
        - 无论符号是“1”还是“0”，每个符号的中间都必须有一个水平跳跃=>更好的抗干扰性能
        - 位时钟和数据之间的分离=>轻松的数据提取
        - 由前一个符号的后半部分唯一确定的过渡=>消除了歧义
      - 缺点：
        - 传输通道的带宽要求翻倍
        - 高频噪声也会增加–易受噪声干扰
    - 块编码（block coding）
      - 优点：
        - 可以提高编码效率，降低调制速率，降低对传输线的要求
        - 可以添加一些冗余位用于错误检测或同步
      - 应用：FDDI，千兆以太网
- 多路技术（Multiplexing）
  - 在一个物理通道中同时发送多源信息
  - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120159927.png" alt="image-20220512015905879" style="zoom:50%;" />
  - FDMA（频分多址） multiple access
    - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120209506.png" alt="image-20220512020914471" style="zoom:45%;" />
    - 信道划分多个频率
    - 每个station分配固定频率
    - 未使用的频带空闲
    - OFDM（正交频分复用）
      - 将信道划分为多个正交子信道
      - 将高速串行数据分解为多个并行低速数据，采用多载波FDM方法进行传输，即将数据分配到大量子信道进行传输
      - ADSL，WLAN，3G
  - WDM（波分复用）multiplexing
    - 在光纤中同时传输多个不同波长的光载波
    - WDM实际上是光纤通道多路复用FDM的一种变体
  - TDMA（时分多址）
    - 以轮的方式传输
    - 每个station在每一轮获得固定长度时隙（slot），长度=packet传输时间
    - 未使用的slot空闲
    - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120212295.png" alt="image-20220512021200259" style="zoom:50%;" />
    - 同步时分复用（Synchronous TDM）
      - 时间片固定地分配给多个用户进行数据传输，每个用户在其相应的时间片到达时使用该信道进行数据传输
      - 优点简单
      - 缺点：容易浪费带宽
      - 适用于固定速率数据通信系统
    - 异步时分复用（Asynchronous TDM）
      - 物理信道的时隙固定地分配，并且用户不占用特定的时间片（time slice）
      - 用户需要传输就分配，不需要就不分配
    - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120217167.png" alt="image-20220512021702067" style="zoom:50%;" />
  - CDMA（码分多址 Code Division Multiple Access）
    - 分配给每个用户的唯一“代码”
    - 所有用户共享相同的频率，但每个用户都有自己的“切分”（chipping）序列（即代码）来编码数据
    - 允许多个用户“共存”并在干扰最小的情况下同时传输（如果代码是“正交的（orthogonal）”）
    - 编码信号 = 原始数据×切片序列
    - 解码：编码信号×切片序列
    -  <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120222347.png" alt="image-20220512022214292" style="zoom:40%;" />
    - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120222182.png" alt="image-20220512022247117" style="zoom:50%;" />

#### 3.传输媒介

- 双绞线（Twisted Pair）

  - 可用于模拟和数字传输
  - 带宽取决于导线直径（diameter）和传输距离
  - UTP（Unshielded Twisted Pair 非屏蔽双绞线），1-7类
  - STP（Shielded twisted pair 屏蔽双绞线）：双绞线由铝箔包裹，用于屏蔽干扰信号，较贵
  - insulation（绝缘）<img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120234033.png" alt="image-20220512023434985" style="zoom:50%;" />

- 同轴电缆（Coaxial cable）

  - 基带（Baseband）同轴电缆：传输数字信号，单通道
  - 宽带（Broadband）同轴电缆：不同频率模拟信号传输
  - <img src="https://raw.githubusercontent.com/xydasixi/cloudimg/main/202205120237682.png" alt="image-20220512023732647" style="zoom:50%;" />

- 光纤

  - 传输速率快
  - 传输损耗小
  - 反干扰能力强

- 无线电（radio）

  - 连接基站和终端
  - 移动通信，WLAN

- 地面微波（Ground microwave）

  - 通过地面站之间中继（relay）传输

- 地球同步卫星

  - 广播传输
  - 电视，长途电话，广域网

  

